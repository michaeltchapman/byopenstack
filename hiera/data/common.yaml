control_classes:
  - openstack_extras::repo::redhat::redhat
  - mysql::server
  - keystone
  - keystone::roles::admin
  - keystone::db::mysql
  - openstack::auth_file
  - glance::api
  - glance::registry
  - glance::db::mysql
  - glance::keystone::auth
  - glance::backend::file

compute_classes:
  - openstack_extras::repo::redhat::redhat

mysql::server::root_password: test123

mysql::server::override_options:
  mysqld:
    bind-address: "%{ipaddress_eth3}"

# Shared data
control_public: 10.2.3.10
control_internal: 10.3.3.10
mysql_module: '2.2'

# Keystone
keystone::db::mysql::mysql_module: "%{hiera('mysql_module')}"
keystone::db::mysql::password: key_pass
keystone::db::mysql::host: "%{hiera('control_internal')}"

keystone::roles::admin::email: user@example.com
keystone::roles::admin::password: admin_pass

keystone::admin_token: supersecret
keystone::public_bind_host: "%{ipaddress_eth2}"
keystone::admin_bind_host: "%{ipaddress_eth2}"
keystone::mysql_module: "%{hiera('mysql_module')}"
keystone::database_connection: "mysql://keystone:key_pass@%{hiera('control_internal')}/keystone"

openstack::auth_file::admin_password: admin_pass
openstack::auth_file::keystone_admin_token: supersecret
openstack::auth_file::controller_node: "%{hiera('control_public')}"

glance::api::keystone_password: glance_pass
glance::api::bind_host: "%{ipaddress_eth2}"
glance::api::auth_host: "%{hiera('control_public')}"
glance::api::database_connection: "mysql://glance:glance_pass@%{hiera('control_internal')}/glance"
glance::api::mysql_module: "%{hiera('mysql_module')}"
glance::api::workers: 1
glance::api::registry_host: "%{hiera('control_public')}"

glance::registry::keystone_password: glance_pass
glance::registry::bind_host: "%{ipaddress_eth2}"
glance::registry::auth_host: "%{hiera('control_public')}"
glance::registry::database_connection: "mysql://glance:glance_pass@%{hiera('control_internal')}/glance"
glance::registry::mysql_module: "%{hiera('mysql_module')}"

glance::db::mysql::password: glance_pass
glance::db::mysql::host: "%{hiera('control_internal')}"
glance::db::mysql::mysql_module: "%{hiera('mysql_module')}"

glance::keystone::auth::password: glance_pass
glance::keystone::auth::public_address: "%{hiera('control_public')}"
glance::keystone::auth::admin_address: "%{hiera('control_public')}"
glance::keystone::auth::internal_address: "%{hiera('control_public')}"
